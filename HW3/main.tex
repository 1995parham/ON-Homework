\documentclass[paper=a4, fontsize=11pt]{article}

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\usepackage{amsmath,amsfonts,amsthm} % Math packages
\usepackage{sectsty} % Allows customizing section commands
\allsectionsfont{\centering \normalfont\scshape} % Make all sections centered, the default font and small caps

\usepackage{fancyhdr} % Custom headers and footers
\pagestyle{fancyplain} % Makes all pages in the document conform to the custom headers and footers
\fancyhead{} % No page header - if you want one, create it in the same way as the footers below
\fancyfoot[L]{} % Empty left footer
\fancyfoot[C]{} % Empty center footer
\fancyfoot[R]{\thepage} % Page numbering for right footer
\renewcommand{\headrulewidth}{0pt} % Remove header underlines
\renewcommand{\footrulewidth}{0pt} % Remove footer underlines
\setlength{\headheight}{13.6pt} % Customize the height of the header

\numberwithin{equation}{section} % Number equations within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{figure}{section} % Number figures within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)
\numberwithin{table}{section} % Number tables within sections (i.e. 1.1, 1.2, 2.1, 2.2 instead of 1, 2, 3, 4)

\setlength{\parindent}{4em}
\setlength{\parskip}{1em}
\renewcommand{\baselinestretch}{1.5}

\usepackage{graphicx}
\graphicspath{ {images/} }

\usepackage{xepersian}
\settextfont[Path=fonts/]{Vazir.ttf}
\setlatintextfont{Times New Roman}

%----------------------------------------------------------------------------------------
%	TITLE SECTION
%----------------------------------------------------------------------------------------

\newcommand{\horrule}[1]{\rule{\linewidth}{#1}} % Create horizontal rule command with 1 argument of height

\title{
\normalfont\normalsize
\includegraphics[scale=0.1]{aut}
\hspace{5cm}
\includegraphics[scale=0.1]{ceit} \\
\textsc دانشگاه صنعتی امیرکبیر \\
\textsc دانشکده مهندسی کامپیوتر و فناوری اطلاعات
\horrule{0.5pt} \\ [0.4cm] % Thin top horizontal rule
\huge بهینه‌سازی و کاربرد آن در شبکه‌های کامپیوتری \\
\huge تمرین سوم
\horrule{2pt} \\ [0.5cm] % Thick bottom horizontal rule
}

\author{پرهام الوانی}

\date{\normalsize\today} % Today's date or a custom date

\begin{document}

\maketitle % Print the title

\section{سوال اول}
\paragraph{}
از آنجایی که یکی از $b_j$ها منفی است
می‌بایست از الگوریتم سیمپلکس دوفازی استفاده کنیم.

\paragraph{}
متغیرهای اسلک و خنثی را وارد کرده و سیمپلکس دوفازی را آغاز می‌کنیم.

\begin{equation}
\begin{array}{c|ccccccccccc|c}
	z & x_1 & x_2 & x_3 & s_1 & s_2 & s_3 & s_4 & a_1 & a_2 & a_3 & a_4 & b \\ \hline
	x_2 & 1 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & \frac{5}{2}\\ 
	a_2 & 1 & 1 & 0 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & 0 & \frac{44}{5}\\
	a_3 & 1 & 0 & \frac{3}{2} & 0 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & \frac{31}{2}\\
	a_4 & 0 & 2 & \frac{1}{2} & 0 & 0 & 0 & 1 & 0 & 0 & 0 & 1 & \frac{19}{2}\\
\end{array}
\end{equation}
\begin{equation}
\begin{array}{c|ccccccccccc|c}
	z & x_1 & x_2 & x_3 & s_1 & s_2 & s_3 & s_4 & a_1 & a_2 & a_3 & a_4 & b \\ \hline
	x_2 & 1 & 1 & 1 & -1 & 0 & 0 & 0 & 1 & 0 & 0 & 0 & \frac{5}{2}\\ 
	a_2 & 0 & 0 & -1 & 1 & 1 & 0 & 0 & -1 & 1 & 0 & 0 & \frac{63}{10}\\
	a_3 & 1 & 0 & \frac{3}{2} & 0 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & \frac{31}{2}\\
	s_1 & -2 & 0 & \frac{-3}{2} & 2 & 0 & 0 & 1 & -2 & 0 & 0 & 1 & \frac{9}{2}\\
\end{array}
\end{equation}
\begin{equation}
\begin{array}{c|ccccccccccc|c}
	z & x_1 & x_2 & x_3 & s_1 & s_2 & s_3 & s_4 & a_1 & a_2 & a_3 & a_4 & b \\ \hline
	x_2 & 0 & 1 & \frac{1}{4} & 0 & 0 & 0 & \frac{1}{2} & 0 & 0 & 0 & \frac{1}{2} & \frac{19}{4}\\ 
	x_1 & 1 & 0 & \frac{-1}{4} & 0 & 1 & 0 & \frac{-1}{2} & 0 & 1 & 0 & \frac{-1}{2} & \frac{81}{20}\\
	a_3 & 1 & 0 & \frac{3}{2} & 0 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & \frac{31}{2}\\
	s_1 & -1 & 0 & \frac{-3}{4} & 1 & 0 & 0 & \frac{1}{2} & -1 & 0 & 0 & \frac{1}{2} & \frac{9}{4}\\
\end{array}
\end{equation}
\begin{equation}
\begin{array}{c|ccccccccccc|c}
	z & x_1 & x_2 & x_3 & s_1 & s_2 & s_3 & s_4 & a_1 & a_2 & a_3 & a_4 & b \\ \hline
	x_2 & 0 & 1 & \frac{1}{4} & 0 & 0 & 0 & \frac{1}{2} & 0 & 0 & 0 & \frac{1}{2} & \frac{19}{4}\\ 
	x_1 & 1 & 0 & \frac{-1}{4} & 0 & 1 & 0 & \frac{-1}{2} & 0 & 1 & 0 & \frac{-1}{2} & \frac{81}{20}\\
	x_3 & 0 & 0 & \frac{7}{4} & 0 & -1 & 1 & \frac{1}{2} & 0 & -1 & 1 & \frac{1}{2} & \frac{229}{20}\\
	s_1 & 0 & 0 & -1 & 1 & 1 & 0 & 0 & -1 & 1 & 0 & 0 & \frac{63}{10}\\
\end{array}
\end{equation}
\begin{equation}
\begin{array}{c|ccccccc|c}
	z & x_1 & x_2 & x_3 & s_1 & s_2 & s_3 & s_4 & b \\ \hline
	x_2 & 0 & 1 & 0 & 0 & \frac{1}{7} & \frac{-1}{7} & \frac{3}{7} & \frac{109}{35}\\ 
	x_1 & 1 & 0 & 0 & 0 & \frac{6}{7} & \frac{1}{7} & \frac{-3}{7} & \frac{199}{35}\\ 
	x_3 & 0 & 0 & 1 & 0 & \frac{-4}{7} & \frac{4}{7} & \frac{2}{7} & \frac{229}{35}\\ 
	s_1 & 0 & 0 & 0 & 1 & \frac{3}{7} & \frac{4}{7} & \frac{2}{7} & \frac{899}{70}\\ 
\end{array}
\end{equation}

\paragraph{}
نود ۱
\begin{align}
\begin{split}
	x_1 = 3.575\\
	x_2 = 3.225\\
	x_3 = 7.95\\
	z = 38.625
\end{split}
\end{align}

\paragraph{}
نود ۲
\begin{align}
\begin{split}
	x_1 = 3\\
	x_2 = 3.0333\\
	x_3 = 8.333\\
	z = 37.767\\
	\text{Constraints}\\
	x_1 <= 3
\end{split}
\end{align}

\paragraph{}
نود ۳
\begin{align}
\begin{split}
	x_1 = 4\\
	x_2 = 4.8\\
	x_3 = 7.667\\
	z = 37.733\\
	\text{Constraints}\\
	x_1 >= 4
\end{split}
\end{align}

\paragraph{}
از آنجایی که از متد \lr{BFS} استفاده می‌کنیم
نود شماره‌ی ۲ را انتخاب کرده و ادامه می‌دهیم.

\paragraph{}
نود ۴
\begin{align}
\begin{split}
	x_1 = 3\\
	x_2 = 5.2\\
	x_3 = 8\\
	z = 37.6\\
	\text{Constraints}\\
	x_1 <= 3
	x_3 <= 8
\end{split}
\end{align}

\paragraph{}
نود ۵
\begin{align}
\begin{split}
	x_1 = 2\\
	x_2 = 4.7\\
	x_3 = 9\\
	z = 36.1\\
	\text{Constraints}\\
	x_1 <= 3
	x_3 >= 9
\end{split}
\end{align}

\paragraph{}
از آنجایی که از متد \lr{BFS} استفاده می‌کنیم
نود شماره‌ی ۳ را انتخاب کرده و ادامه می‌دهیم.

\paragraph{}
نود ۶
\begin{align}
\begin{split}
	x_1 = 4\\
	x_2 = 4.8\\
	x_3 = 7\\
	z = 36.4\\
	\text{Constraints}\\
	x_1 >= 4
	x_3 <= 7
\end{split}
\end{align}

\paragraph{}
نود ۷
\begin{align}
\begin{split}
	\text{Infeasible}\\
	\text{Constraints}\\
	x_1 >= 4
	x_3 >= 8
\end{split}
\end{align}

\paragraph{}
از آنجایی که از متد \lr{BFS} استفاده می‌کنیم
نود شماره‌ی ۴ را انتخاب کرده و ادامه می‌دهیم.

\paragraph{}
نود ۸
\begin{align}
\begin{split}
	x_1 = 3\\
	x_2 = 5\\
	x_3 = 8\\
	z = 37\\
	\text{Constraints}\\
	x_1 <= 3
	x_2 <= 5
	x_3 <= 8
\end{split}
\end{align}

\paragraph{}
نود ۹
\begin{align}
\begin{split}
	x_1 = 2.8\\
	x_2 = 6\\
	x_3 = 6.4\\
	z = 36.4\\
	\text{Constraints}\\
	x_1 <= 3
	x_2 >= 6
	x_3 <= 8
\end{split}
\end{align}

\paragraph{}
با توجه به اینکه مقداری که نود ۸ بدست آمده است صحیح بوده
و از تمام جواب‌های آزاد شده‌ی نودها بیشتر است جواب نهایی جواب نود ۸ می‌باشد.

\section{سوال دوم}
\subsection{الف}
\paragraph{}
متغیر $x_{i,(u,v)}$
نشان می‌دهد که یال $u,v$ در
مسیریابی تقاضای iام استفاده شده است یا خیر.

\begin{align}
\begin{split}
	min \sum_{i = [1, ..., |D|]}\sum_{(u,v) \in E} x_{i,(u,v)}W_{(u,v)}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{(u,v) \in E} x_{i,(u,v)} - \sum_{(v,u) \in E} x_{i,(v,u)} = 
	\left \{
		\begin{array}{cc}
			1 & u = s_i\\
			0 & u \in V - {s_i, t_i}\\
			-1 & u = t_i
		\end{array}
	\right.
	\\
	\quad u \in V, i = {1, ..., |D|}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{(u,v) \in E} x_{i,(u,v)}Z_{(u,v)} \le d_i
	\quad
	i = {1, ..., |D|}
\end{split}
\end{align}

\subsection{ب}
\paragraph{}
گراف کامل با ۸ راس در نظر گرفته شده است. در این گراف تاخیر همه‌ی لینک‌ها برابر با ۵ فرض شده است و تمام وزن یال‌ها نیز برابر با ۱ فرض شده است.
\paragraph{}
نتایج و کدها به پیوست آمده است.

\subsection{ج}
\begin{align}
\begin{split}
	max -\sum_{i = [1, ..., |D|]}\sum_{(u,v) \in E} x_{i,(u,v)}W_{(u,v)} - \sum_{i = [1, ..., |D|]}\lambda^T(\sum_{(u,v) \in E} x_{i,(u,v)}Z_{(u,v)} - d_i)
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{(u,v) \in E} x_{i,(u,v)} - \sum_{(v,u) \in E} x_{i,(v,u)} = 
	\left \{
		\begin{array}{cc}
			1 & u = s_i\\
			0 & u \in V - {s_i, t_i}\\
			-1 & u = t_i
		\end{array}
	\right.
	\\
	\quad u \in V, i = {1, ..., |D|}
\end{split}
\end{align}

\subsection{د}
کدها و نتایج به پیوست آمده است.
با کاهش مقدار $\lambda$ می‌توان مقدار بهینه تابع آزاد شده را
به تابع اصلی نزدیک کرد ولی از سوی دیگر با کوچکتر کردن این ضرایب
ممکن است حل کننده بعضی از محدودیت‌ها را نقش کند.

\section{سوال سوم}
\subsection{الف}
\paragraph{}
متغیر $x_{i,(u,v)}$ نشان می‌دهد که آیا کانال i به یال $(u,v)$
اختصاص یافته است یا خیر.

\paragraph{}
متغیر $y_{i,u}$ نشان می‌دهد
که آیا کانال i در راس u استفاده شده است یا خیر

\paragraph{}
متغیر $z_{(u,v),(u',v')}$
نشان می‌دهد یال‌های $(u,v)$ و $(u',v')$ با یکدیگر تداخل دارند یا خیر.

\begin{align}
\begin{split}
	min \sum_{(u,v) \in E}\sum_{(u',v') \in I_{u,v}} z_{(u,v),(u',v')}
\end{split}
\end{align}

\begin{align}
\begin{split}
	x_{i,(u,v)} + x_{i,(u',v')} - 1 \le z_{(u,v),(u',v')}
	\quad
	1 \le i \le 12, (u,v) \in E, (u',v') \in I_{(u,v)}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i=1}^{12} x_{i,(u,v)} = 1
	\quad (u,v) \in E
\end{split}
\end{align}

\begin{align}
\begin{split}
	x_{i,(u,v)} \le y_{i,u}\\
	x_{i,(u,v)} \le y_{i,v}\\
	\quad (u,v) \in E, 1 \le i \le 12
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i=1}^{12} y_{i,u} \le r_u
	\quad u \in V, 1 \le u \le 12
\end{split}
\end{align}

\subsection{ب و ج}
\paragraph{}
نتایج و کدها به پیوست آمده است.

\section{سوال چهارم}
\subsection{الف}
\paragraph{}
متغیر $f_{i,(u,v)}$ میزان جریانی است که از تقاضای iام روی لینک
$(u,v)$ جریان دارد.

\paragraph{}
متغیر $b_i$ نشان می‌دهد پنهای باندی که به تقاضای iام
اختصاص داده شده است چقدر است.

\begin{align}
\begin{split}
	min \sum_{i = [1, ..., |D|]} b_i
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{(u,v) \in E} f_{i,(u,v)} - \sum_{(v,u) \in E} f_{i,(v,u)} = 
	\left \{
		\begin{array}{cc}
			b_i & u = s_i\\
			0 & u \in V - {s_i, t_i}\\
			-b_i & u = t_i
		\end{array}
	\right.
	\\
	\quad u \in V, i = {1, ..., |D|}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i = {1, ..., |D|}} f_{i,(u,v)} + \sum_{(u',v') \in I_{(u,v)}} z_{(u,v),(u',v')} \sum_{i = {1, ..., |D|}} f_{i,(u',v')} \le c_{(u,v)}
	\quad (u,v) \in E
\end{split}
\end{align}

\subsection{ب و ج}
\paragraph{}
نتایج و کدها به پیوست آمده است.

\section{سوال پنچم}
\subsection{الف}
\paragraph{}
متغیر $f_{i,(u,v)}$ میزان جریانی است که از تقاضای iام روی لینک
$(u,v)$ جریان دارد.

\paragraph{}
متغیر $b_i$ نشان می‌دهد پنهای باندی که به تقاضای iام
اختصاص داده شده است چقدر است.

\paragraph{}
متغیر $x_{i,(u,v)}$ نشان می‌دهد که آیا کانال i به یال $(u,v)$
اختصاص یافته است یا خیر.

\paragraph{}
متغیر $y_{i,u}$ نشان می‌دهد
که آیا کانال i در راس u استفاده شده است یا خیر

\paragraph{}
متغیر $z_{(u,v),(u',v')}$
نشان می‌دهد یال‌های $(u,v)$ و $(u',v')$ با یکدیگر تداخل دارند یا خیر.

\begin{align}
\begin{split}
	min \sum_{i = [1, ..., |D|]} b_i
\end{split}
\end{align}

\begin{align}
\begin{split}
	x_{i,(u,v)} + x_{i,(u',v')} - 1 \le z_{(u,v),(u',v')}
	\quad
	1 \le i \le 12, (u,v) \in E, (u',v') \in I_{(u,v)}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i=1}^{12} x_{i,(u,v)} = f_{i,(u,v)}
	\quad (u,v) \in E
\end{split}
\end{align}

\begin{align}
\begin{split}
	x_{i,(u,v)} \le y_{i,u}\\
	x_{i,(u,v)} \le y_{i,v}\\
	\quad (u,v) \in E, 1 \le i \le 12
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i=1}^{12} y_{i,u} \le r_u
	\quad u \in V, 1 \le u \le 12
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{(u,v) \in E} f_{i,(u,v)} - \sum_{(v,u) \in E} f_{i,(v,u)} = 
	\left \{
		\begin{array}{cc}
			b_i & u = s_i\\
			0 & u \in V - {s_i, t_i}\\
			-b_i & u = t_i
		\end{array}
	\right.
	\\
	\quad u \in V, i = {1, ..., |D|}
\end{split}
\end{align}

\begin{align}
\begin{split}
	\sum_{i = {1, ..., |D|}} f_{i,(u,v)} + \sum_{(u',v') \in I_{(u,v)}} z_{(u,v),(u',v')} \sum_{i = {1, ..., |D|}} f_{i,(u',v')} \le c_{(u,v)}
	\quad (u,v) \in E
\end{split}
\end{align}

\subsection{ب و ج}
\paragraph{}
نتایج و کدها به پیوست آمده است.

\subsection{د}
جواب این مساله بهینه‌تر می‌باشد زیرا اختصاص کانال به صورتی است که به آن نیاز داریم و
مسیرهایی که به آن‌ها احتیاجی نیست کانالی نیز به آن‌ها تخصیص داده نمی‌شود.

\subsection{ذ}
حل این مساله از مجموع زمان حل دو مساله‌ی قبل بیشتر طول می‌کشد زیرا حالت‌های بیشتری را نسبت به آن دو بررسی می‌کند.

\end{document}